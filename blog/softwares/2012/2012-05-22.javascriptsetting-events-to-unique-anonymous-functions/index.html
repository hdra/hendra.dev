<!doctype html><html><head><link href="https://fonts.googleapis.com/css?family=Gentium+Book+Basic|Merriweather:400,300" rel=stylesheet type=text/css><link rel=stylesheet href=/styles/style.min.c0b4952e0f4a487d4c3abdf274eadaeb27de0b57edd8e0ac671a741882eb6c46.css><title>hendra.dev - Javascript – Setting Events to Unique Anonymous Functions</title></head><body><div class=container><header class=blog-header><h1><a href=https://hendra.dev/>hendra.dev</a></h1><p>A work in progress</p><nav><ul class=nav><li><a href=/blog/>blogs</a></li><li><a href=/notes/>notes</a></li></ul></nav></header><div class=post><header><h1>Javascript – Setting Events to Unique Anonymous Functions</h1><p class=date>Written on <time datetime=2012-05-22T22:24:00+0700>May 22, 2012</time></p></header><article><p>Ok, the easiest way to convey my point is with code, so:</p><pre><code>:::javascript
function foo(bar){console.log(bar);}
for(var i=1;i&lt;5;i++){
  $('someDiv'+i).onclick=function(){foo(i);};
}
</code></pre><p>Say you are trying to set the onclick event of an array of elements in
your page, and each of these events need to trigger the same function,
but passing different parameter, seems simple enough, but if you try to
run the code above, all of the click events will print the value 5. The
value of i is 5 because the value is incremented with the for loop
before it stopped executing, simple enough, but it seems like the
anonymous functions that we created refer to the same value as well.</p><p>So, well, the first thing that comes to mind is I kind of need to create
&ldquo;instances&rdquo; of these anonymous functions individually, with the help of
this <a href=http://stackoverflow.com/questions/4900029/javascript-context-in-anonymous-functions>stackoverflow thread</a>, I got to know the answer is self executing
anonymous function and a return statement, so here it is:</p><pre><code>:::javascript
function foo(bar){
  console.log(bar);
}
for(var i=1;i&lt;5;i++){
  $('someDiv'+i).onclick=function(i){return function(){foo(i);};}(i);
}
</code></pre></article><p class=page-footer>✵</p></div></body></html>