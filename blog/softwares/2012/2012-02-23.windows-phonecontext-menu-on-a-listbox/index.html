<!doctype html><html><head><link href="https://fonts.googleapis.com/css?family=Gentium+Book+Basic|Merriweather:400,300" rel=stylesheet type=text/css><link rel=stylesheet href=/styles/bundle.min.ae8f9b8981c6f47473b2fdd8f2921cc3be0de726509d60c99ff249da60e646df.css><title>hendra.dev - Windows Phone – Context Menu on a ListBox</title></head><body><div class=container><header class=blog-header><h1><a href=https://hendra.dev/>hendra.dev</a></h1><p>A work in progress</p><nav><ul class=nav><li><a href=/blog/>blogs</a></li><li><a href=/notes/>notes</a></li></ul></nav></header><div class=post><header><h1>Windows Phone – Context Menu on a ListBox</h1><p class=date>Written on <time datetime=2012-02-23T22:04:00+0700>Feb 23, 2012</time></p></header><article><p>Ok, I have been working on updating one of my windows phone app,
<a href=http://www.windowsphone.com/en-US/apps/dca01efc-aaf9-4785-a165-642d8b8def34>Swatch 7</a>. I added a feature that allows user to save the color they
picked. I have write more on that on another post, maybe after the app
on the marketplace is updated. So, to remove one finished doing that,
but I’llof the saved color, I used the context menu provided with the
windows phone toolkit. It’s a bit different in the way that I can’t
access the selected item of the <code>ListBox</code> the ordinary way ( the
selectedIndex returns –1, so that means holding down a listbox item
doesn’t count as selecting it). So, I need a way to get information
about which item to remove, and after a bit of internet search, here is
how I do it:</p><pre><code>:::xml
&lt;ListBox Name=&quot;paletteList&quot;&gt;
    &lt;ListBox.ItemTemplate&gt;
        &lt;DataTemplate&gt;
            &lt;Grid Margin=&quot;4&quot;&gt;
                &lt;toolkit:ContextMenuService.ContextMenu&gt;
                    &lt;toolkit:ContextMenu&gt;
                        &lt;toolkit:MenuItem Header=&quot;Delete&quot; Name=&quot;removeFromPalette&quot;
                                        Click=&quot;removeFromPalette_Click&quot;/&gt;
                    &lt;/toolkit:ContextMenu&gt;
                &lt;/toolkit:ContextMenuService.ContextMenu&gt;
            &lt;/Grid&gt;
        &lt;/DataTemplate&gt;
    &lt;/ListBox.ItemTemplate&gt;
&lt;/ListBox&gt;
</code></pre><p>Those are the code to set the context menu for the listbox, and here is
how the C# code on the click event:</p><pre><code>:::csharp
private void removeFromPalette_Click(object sender, RoutedEventArgs e)
{
    Item selectedItem = (sender as MenuItem).DataContext as Item;
    // Do whatever with the selectedItem
}
</code></pre></article><p class=page-footer>✵</p></div></body></html>